(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{217:function(s,t,e){"use strict";e.r(t);var n=e(0),p=Object(n.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("最近想着建一个独立博客记笔记，趁着阿里云搞活动，买了台入门级ESC云服务器，不算贵，300左右，"),e("a",{attrs:{href:"https://promotion.aliyun.com/ntms/act/qwbk.html?spm=5176.64391.592490.1.5fa01a4boSz6eG#floor1",title:"有兴趣的可以看看--\x3e",target:"_blank",rel:"noopener noreferrer"}},[s._v("有兴趣的可以看看--\x3e"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719220122320-949619853.png",alt:""}})]),s._v(" "),e("p",[s._v("我使用的是CentOS，什么环境都没有，两种方案，一种自己装，另外一种是使用镜像市场中的环境（推荐），先停掉实例，再点击更换系统盘。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719153105551-742137227.png",alt:""}})]),s._v(" "),e("p",[s._v("找到适合自己的镜像系统，购买（大多数都免费），如我现在使用的"),e("a",{attrs:{href:"https://market.aliyun.com/products/53400005/cmjj014493.html?spm=5176.204674.1085795.1.NLHi92",title:"Java运行环境",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java运行环境"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719163026757-1921813438.png",alt:""}})]),s._v(" "),e("p",[s._v("设置下密码，购买成功后会自动启动实例，省了很多时间。")]),s._v(" "),e("p",[s._v("接下来按照镜像说明重新修改MySQL的密码")]),s._v(" "),e("p",[s._v("先使用xshell连接到服务器，执行命令，查看镜像配置的初始信息")]),s._v(" "),e("p",[s._v("more readme.txt")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719163758107-1686267811.png",alt:""}})]),s._v(" "),e("p",[s._v("找到mysql的初始密码，执行命令")]),s._v(" "),e("p",[s._v("mysqladmin -u root -h 127.0.0.1 -p password")]),s._v(" "),e("p",[s._v("输入初始密码，然后再输入新密码就可以了。")]),s._v(" "),e("p",[s._v("如需远程访问mysql，请依次执行一下语句")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" host"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("配置安全组端口策略，增加入方向、出方向端口 3306")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719164856651-635192807.png",alt:""}})]),s._v(" "),e("p",[s._v("使用Navicat测试一下是否可用。")]),s._v(" "),e("p",[s._v("购买域名，配置域名解析到刚才买的服务器ip，如果出现ping不到解析好的域名，可以使用命令ipconfig /flushdns，清一下本地dns缓存（windows）")]),s._v(" "),e("hr"),s._v(" "),e("p",[s._v("下一步搭建idea激活服务器")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/codeyou/p/9165717.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考我另一篇博客"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("查看端口：netstat -lnp|grep  端口号")]),s._v(" "),e("p",[s._v("查看进程：ps -ef|grep 进程名称")]),s._v(" "),e("p",[s._v("刷新缓存：hash -r")]),s._v(" "),e("p",[s._v("配置nginx")]),s._v(" "),e("p",[s._v("按照环境说明找到nginx配置文件目录 /etc/nginx/nginx.conf")]),s._v(" "),e("p",[s._v("打开，添加如下配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#idea_service\nserver\n{\n    listen 80;\n    server_name idea.ifelse.top;\n    location / {\n        proxy_pass http://127.0.0.1:8999;\n }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("重启nginx")]),s._v(" "),e("pre",[e("code",[s._v("启动nginx：systemctl start nginx\n重启nginx：systemctl restart nginx\n禁止nginx：systemctl disable nginx\n")])]),s._v(" "),e("hr"),s._v(" "),e("p",[s._v("最后就是重点了，安装博客系统，这里我使用的是typecho，是php写的，所以首先要安装php环境")]),s._v(" "),e("p",[s._v("安装之前我先做下快照，因为之前也是安装php环境把服务器搞坏了。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719171751281-421407230.png",alt:""}})]),s._v(" "),e("p",[s._v("第一次创建快照稍微慢一些，等一会。")]),s._v(" "),e("p",[s._v("等快照创建完成后，开始安装php环境，同样是两种方式，一种是通过"),e("a",{attrs:{href:"https://www.bt.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("宝塔面板"),e("OutboundLink")],1),s._v("安装，这个工具很强大，可以直接一键安装各种环境，但是我的服务器配置太低，宝塔的一些服务会占用部分资源，所有我使用第二种方式安装，也就是原生态安装。")]),s._v(" "),e("p",[s._v("替换系统yum为阿里yum源")]),s._v(" "),e("pre",[e("code",[s._v("wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n")])]),s._v(" "),e("p",[s._v("运行以下命令生成缓存")]),s._v(" "),e("p",[s._v("yum clean all\nyum makecache")]),s._v(" "),e("p",[s._v("附："),e("a",{attrs:{href:"http://mirrors.163.com/.help/centos.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("163源说明文档"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("查看系统的版本：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat /etc/redhat-release\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装php和php-fpm命令")]),s._v(" "),e("pre",[e("code",[s._v("yum install php php-fpm\n")])]),s._v(" "),e("p",[s._v("查看php版本命令")]),s._v(" "),e("pre",[e("code",[s._v("php -v\n")])]),s._v(" "),e("p",[s._v("启动php-fpm")]),s._v(" "),e("pre",[e("code",[s._v("systemctl start php-fpm\n")])]),s._v(" "),e("p",[s._v("将PHP与mysql模块关联起来")]),s._v(" "),e("pre",[e("code",[s._v("yum install php-gd php-mysql php-mbstring php-xml php-mcrypt  php-imap php-odbc php-pear php -xmlrpc\n")])]),s._v(" "),e("p",[s._v("修改/etc/php.ini中关于mysql的配置，否则在typecho向导界面会不显示数据库驱动器")]),s._v(" "),e("p",[s._v('安装完typecho后，遇到一个问题，无法登录后台，点击前台链接或者后台登录时出现"404, not found"，'),e("a",{attrs:{href:"http://docs.typecho.org/faq",target:"_blank",rel:"noopener noreferrer"}},[s._v("后台看官方FAQ找到了答案"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("配置nginx关联php，这个官方配置，我也是改了好久，用的这个才跑起来的（推荐）")]),s._v(" "),e("pre",[e("code",[s._v("server {\n        listen 80;\n        server_name     yourdomain.com;\n        root /home/yourdomain/www/;\n        index           index.html index.htm index.php; if (!-e $request_filename) {\n            rewrite ^(.*)$ /index.php$1 last;\n        }\n\n        location ~ .*\\\\.php(\\\\/.*)*$ {\n            include fastcgi.conf;\n            fastcgi_pass 127.0.0.1:9000;\n        }\n}\n")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://images2018.cnblogs.com/blog/480298/201807/480298-20180719220207427-2144266670.png",alt:""}})]),s._v(" "),e("p",[s._v("到这里，我的Linux服务器算是完成了，剩下的以后在折腾吧，以后博客就在typecho上写了。")])])},[],!1,null,null,null);t.default=p.exports}}]);